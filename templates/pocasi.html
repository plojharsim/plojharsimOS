<!DOCTYPE html>
<html lang="cs-cz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoÄasÃ­ - plojharsimOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#fff8f2]">
    <header class="flex justify-between items-center p-4">
        <div class="text-xl">PoÄasÃ­</div>
        <div id="city" class="text-lg">ğŸ“ZjiÅ¡Å¥uji polohu...</div>
        <div class="text-xl">plojharsimOS</div>
    </header>
    <main>
        <div id="temp" class="p-24 flex justify-center text-[13rem] font-normal">--Â°C</div>
    </main>
</body>
<script>
  const API_KEY = "08f3a232b38d17668b72009243c2d789"; // TvÅ¯j OpenWeatherMap API klÃ­Ä
  // Funkce pro naÄtenÃ­ poÄasÃ­ podle souÅ™adnic
  async function loadWeather(lat, lon) {
    const URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=cz`;
    try {
      const res = await fetch(URL);
      const data = await res.json();
      const temp = Math.round(data.main.temp);
      const desc = data.weather[0].description;
      const iconCode = data.weather[0].icon;
      const city = data.name;
      const iconMap = {
        "01d": "â˜€ï¸", "01n": "ğŸŒ•",
        "02d": "ğŸŒ¤ï¸", "02n": "ğŸŒ¥ï¸",
        "03d": "â˜ï¸", "03n": "â˜ï¸",
        "04d": "â˜ï¸", "04n": "â˜ï¸",
        "09d": "ğŸŒ§ï¸", "09n": "ğŸŒ§ï¸",
        "10d": "ğŸŒ¦ï¸", "10n": "ğŸŒ§ï¸",
        "11d": "â›ˆï¸", "11n": "ğŸŒ©ï¸",
        "13d": "â„ï¸", "13n": "ğŸŒ¨ï¸",
        "50d": "ğŸŒ«ï¸", "50n": "ğŸŒ«ï¸"
      };
      document.getElementById("temp").textContent = `${temp}Â°C`;
      document.getElementById("city").textContent = `ğŸ“${city}`;
      document.getElementById("desc").textContent =
        desc.charAt(0).toUpperCase() + desc.slice(1);
      document.getElementById("icon").textContent =
        iconMap[iconCode] || "ğŸŒ¤ï¸";
    } catch (error) {
      document.getElementById("desc").textContent = "NepodaÅ™ilo se naÄÃ­st poÄasÃ­ ğŸ˜•";
      console.error(error);
    }
  }
  // AutomatickÃ© zÃ­skÃ¡nÃ­ polohy uÅ¾ivatele
  window.onload = () => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (pozice) => {
          const lat = pozice.coords.latitude;
          const lon = pozice.coords.longitude;
          loadWeather(lat, lon);
        },
        (chyba) => {
          document.getElementById("city").textContent = "ğŸ“NepodaÅ™ilo se zjistit polohu";
          console.error(chyba);
        }
      );
    } else {
      document.getElementById("city").textContent = "ğŸ“Geolokace nenÃ­ podporovÃ¡na";
    }
  };
</script>
</html>
