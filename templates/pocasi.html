<!DOCTYPE html>
<html lang="cs-cz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Počasí - plojharsimOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#fff8f2]">
    <header class="flex justify-between items-center p-4">
        <div class="text-xl">Počasí</div>
        <div id="city" class="text-lg">📍Zjišťuji polohu...</div>
        <div class="text-xl">plojharsimOS</div>
    </header>
    <main>
        <div id="temp" class="p-24 flex justify-center text-[13rem] font-normal">--°C</div>
    </main>
</body>
<script>
  const API_KEY = "08f3a232b38d17668b72009243c2d789"; // Tvůj OpenWeatherMap API klíč
  // Funkce pro načtení počasí podle souřadnic
  async function loadWeather(lat, lon) {
    const URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=cz`;
    try {
      const res = await fetch(URL);
      const data = await res.json();
      const temp = Math.round(data.main.temp);
      const desc = data.weather[0].description;
      const iconCode = data.weather[0].icon;
      const city = data.name;
      const iconMap = {
        "01d": "☀️", "01n": "🌕",
        "02d": "🌤️", "02n": "🌥️",
        "03d": "☁️", "03n": "☁️",
        "04d": "☁️", "04n": "☁️",
        "09d": "🌧️", "09n": "🌧️",
        "10d": "🌦️", "10n": "🌧️",
        "11d": "⛈️", "11n": "🌩️",
        "13d": "❄️", "13n": "🌨️",
        "50d": "🌫️", "50n": "🌫️"
      };
      document.getElementById("temp").textContent = `${temp}°C`;
      document.getElementById("city").textContent = `📍${city}`;
      document.getElementById("desc").textContent =
        desc.charAt(0).toUpperCase() + desc.slice(1);
      document.getElementById("icon").textContent =
        iconMap[iconCode] || "🌤️";
    } catch (error) {
      document.getElementById("desc").textContent = "Nepodařilo se načíst počasí 😕";
      console.error(error);
    }
  }
  // Automatické získání polohy uživatele
  window.onload = () => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (pozice) => {
          const lat = pozice.coords.latitude;
          const lon = pozice.coords.longitude;
          loadWeather(lat, lon);
        },
        (chyba) => {
          document.getElementById("city").textContent = "📍Nepodařilo se zjistit polohu";
          console.error(chyba);
        }
      );
    } else {
      document.getElementById("city").textContent = "📍Geolokace není podporována";
    }
  };
</script>
</html>
